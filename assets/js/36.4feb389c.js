(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{532:function(t,e,s){"use strict";s.r(e);var a=s(55),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"storefront-framework"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storefront-framework"}},[t._v("#")]),t._v(" Storefront Framework")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.npmjs.org/@ecomplus/storefront-framework",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://img.shields.io/npm/v/@ecomplus/storefront-framework.svg",alt:"npm version"}}),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://opensource.org/licenses/MIT",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://img.shields.io/badge/License-MIT-yellow.svg",alt:"License MIT"}}),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://webpack.js.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack"),s("OutboundLink")],1),t._v(" based\ntool to develop and build\n"),s("a",{attrs:{href:"https://jamstack.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("JAMstack"),s("OutboundLink")],1),t._v(" &\n"),s("a",{attrs:{href:"https://developers.google.com/web/progressive-web-apps/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PWA"),s("OutboundLink")],1),t._v("\ne-commerce templates with\n"),s("a",{attrs:{href:"https://developers.e-com.plus/docs/reference/",target:"_blank",rel:"noopener noreferrer"}},[t._v("E-Com Plus APIs"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/ecomclub/storefront-framework/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("CHANGELOG"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"starter-template"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#starter-template"}},[t._v("#")]),t._v(" Starter template")]),t._v(" "),s("p",[s("code",[t._v("storefront-framework")]),t._v(" is a JS tool "),s("strong",[t._v("to create new templates")]),t._v("\nfaster and with better development experience,\nbut if you don't want to start the entire template from scratch,\nwe also provide the\n"),s("a",{attrs:{href:"https://github.com/ecomclub/storefront",target:"_blank",rel:"noopener noreferrer"}},[t._v("storefront"),s("OutboundLink")],1),t._v(",\nwhich is built with this framework\nand is also open source ðŸ˜‰")]),t._v(" "),s("p",[s("em",[t._v("Storefront")]),t._v(" is a complete e-commerce template\nwith few dependencies,\nyou may change what you need to customize\nand setup your own theme and scripts.")]),t._v(" "),s("h2",{attrs:{id:"getting-started"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[t._v("#")]),t._v(" Getting started")]),t._v(" "),s("p",[t._v("First things first, install the module as dev dependency:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i --save-dev @ecomplus/storefront-framework\n")])])]),s("blockquote",[s("p",[t._v("Note: while you can install and run "),s("code",[t._v("storefront-pack")]),t._v(" globally,\nwe recommend installing it locally.")])]),t._v(" "),s("h3",{attrs:{id:"commands"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commands"}},[t._v("#")]),t._v(" Commands")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("storefront-pack serve")]),t._v(":\nStarts Webpack development server on port "),s("em",[t._v("9100")]),t._v(" (http://localhost:9100);")]),t._v(" "),s("li",[s("code",[t._v("storefront-pack build")]),t._v(":\nCompile assets bundles for production and prerender e-commerce pages;")])]),t._v(" "),s("h4",{attrs:{id:"optional-arguments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#optional-arguments"}},[t._v("#")]),t._v(" Optional arguments")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("--port=8080")]),t._v(":\nChange the dev server port number, you may replace "),s("em",[t._v("8080")]),t._v(" by what you want;")]),t._v(" "),s("li",[s("code",[t._v("--verbose")]),t._v(":\nDetailed output of Webpack compilation process;")]),t._v(" "),s("li",[s("code",[t._v("--analyze")]),t._v(":\nOpen "),s("a",{attrs:{href:"https://github.com/webpack-contrib/webpack-bundle-analyzer",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack Bundle Analyzer"),s("OutboundLink")],1),t._v(" with dev server;")]),t._v(" "),s("li",[s("code",[t._v("--sw")]),t._v(":\nForce setup manifest and Service Worker on dev server;")]),t._v(" "),s("li",[s("code",[t._v("--prerender=index,app/index")]),t._v(":\nList URLs to be prerendered (defaults to all);")]),t._v(" "),s("li",[s("code",[t._v("--prerender-limit=50")]),t._v(":\nLimit number of random URLs to be prerendered;")]),t._v(" "),s("li",[s("code",[t._v("--no-bundler")]),t._v(":\nDisable Webback compilation to run views renderization only;")])]),t._v(" "),s("h3",{attrs:{id:"npm-scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-scripts"}},[t._v("#")]),t._v(" NPM scripts")]),t._v(" "),s("p",[t._v("NPM "),s("code",[t._v("package.json")]),t._v(" scripts are a convenient and useful means to run\nlocally installed binaries without having to be concerned\nabout their full paths. Simply define a script as such:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"serve"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"storefront-pack serve"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"storefront-pack build"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("And run the following in your terminal/console:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run serve\n")])])]),s("p",[t._v("Building for production:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build\n")])])]),s("h2",{attrs:{id:"pages-cms"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pages-cms"}},[t._v("#")]),t._v(" Pages CMS")]),t._v(" "),s("p",[t._v("You should use a CMS for the store pages,\nwe recommend "),s("a",{attrs:{href:"https://www.netlifycms.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Netlify CMS"),s("OutboundLink")],1),t._v(" and provide\nan starter\n"),s("a",{attrs:{href:"https://github.com/ecomclub/storefront-framework/blob/master/template/public/admin/config.yml",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("config.yml")]),s("OutboundLink")],1),t._v("\nfile.")]),t._v(" "),s("p",[t._v("All "),s("strong",[t._v("content must be JSON")]),t._v(", saved on "),s("code",[t._v("content")]),t._v(" folder.")]),t._v(" "),s("h2",{attrs:{id:"renderization"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#renderization"}},[t._v("#")]),t._v(" Renderization")]),t._v(" "),s("p",[t._v("We use "),s("a",{attrs:{href:"https://ejs.co/",target:"_blank",rel:"noopener noreferrer"}},[t._v("EJS"),s("OutboundLink")],1),t._v(" to prerender views with\nfollowing template data:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  _"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Boolean development mode")]),t._v("\n    devMode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Parsed object from `content/settings.json`")]),t._v("\n    settings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Function to get CMS JSON content by filepath")]),t._v("\n    cms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Function to get `content/dictionary/${lang}` object")]),t._v("\n    dictionary"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// MarkdownIt instance to parse MD markup")]),t._v("\n    md"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Store ID number")]),t._v("\n    storeId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Language code string")]),t._v("\n    lang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Brand colors RGB")]),t._v("\n    primaryColor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    secondaryColor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Preloaded data from E-Com Plus APIs")]),t._v("\n    store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    categories"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    grids"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    items"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Contextual route object")]),t._v("\n    route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Async resolve current route and get context object")]),t._v("\n    resolveRoute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Lodash utility library")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://lodash.com/docs/")]),t._v("\n    lodash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Utility functions for e-commerce")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://developers.e-com.plus/ecomplus-utils/")]),t._v("\n    ecomUtils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// E-Com Plus APIs client")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://developers.e-com.plus/ecomplus-client/")]),t._v("\n    ecomClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Search engine constructor")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://developers.e-com.plus/search-engine/")]),t._v("\n    EcomSearch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Detect local images dimensions")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://github.com/image-size/image-size")]),t._v("\n    tryImageSize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    imageSize\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("EJS is configured with support for\n"),s("code",[t._v("asyc/await")]),t._v(" and "),s("code",[t._v("includes")]),t._v(".")]),t._v(" "),s("blockquote",[s("p",[t._v("Note that all parameters are inside the parent "),s("code",[t._v("_")]),t._v(" ("),s("em",[t._v("global")]),t._v("),\nwe use it to make easy to pass the original template parameters\nwith EJS includes.")])]),t._v(" "),s("h3",{attrs:{id:"examples"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[t._v("#")]),t._v(" Examples")]),t._v(" "),s("p",[t._v("You can code examples of EJS these views in our\n"),s("a",{attrs:{href:"https://github.com/ecomclub/storefront-template",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("storefront-template")]),s("OutboundLink")],1),t._v(" repo.")]),t._v(" "),s("h3",{attrs:{id:"loading-json-content"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loading-json-content"}},[t._v("#")]),t._v(" Loading JSON content")]),t._v(" "),s("p",[t._v("You may load CMS content by calling the "),s("code",[t._v("cms")]),t._v(" function\nwith the filename (without extension) as param, eg.:")]),t._v(" "),s("div",{staticClass:"language-ejs extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ejs"}},[s("code",[s("span",{pre:!0,attrs:{class:"token ejs language-ejs"}},[s("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" page "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cms")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pages/about-us'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ")]),s("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token ejs language-ejs"}},[s("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v(" page"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title ")]),s("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n")])])]),s("h3",{attrs:{id:"parsing-markdown-content"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#parsing-markdown-content"}},[t._v("#")]),t._v(" Parsing markdown content")]),t._v(" "),s("p",[t._v("Some of your CMS content may be saved as markdown,\non EJS views you can render it to HTML by using "),s("code",[t._v("md.render")]),t._v(" function,\neg.:")]),t._v(" "),s("div",{staticClass:"language-ejs extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ejs"}},[s("code",[s("span",{pre:!0,attrs:{class:"token ejs language-ejs"}},[s("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%=")]),s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v(" _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("md"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("home"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("md_content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ")]),s("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n")])])]),s("h3",{attrs:{id:"handling-slugs-and-routes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#handling-slugs-and-routes"}},[t._v("#")]),t._v(" Handling slugs and routes")]),t._v(" "),s("p",[t._v("Template parameters will have a "),s("code",[t._v("route")]),t._v(" property,\nit'll be an object varying by type of view:")]),t._v(" "),s("ul",[s("li",[t._v("Store resource (products, categories, brands, collections):")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("route "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _id "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("You should use "),s("code",[t._v("route._id")]),t._v(" to get the body of respective\nresource document with "),s("code",[t._v("ecomClient")]),t._v(";")]),t._v(" "),s("ul",[s("li",[t._v("CMS folder collection (eg.: "),s("em",[t._v("blog")]),t._v(" or "),s("em",[t._v("pages")]),t._v("):")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("route "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" collection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" slug "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("You should use "),s("code",[t._v("route.slug")]),t._v(" to get the parsed CMS content\nwith "),s("code",[t._v("cms")]),t._v(" function;")]),t._v(" "),s("ul",[s("li",[t._v("In other cases, such as for "),s("code",[t._v("index.ejs")]),t._v(":")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("route "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("You may use "),s("code",[t._v("route.path")]),t._v(" to know the current context\non included EJS partials;")]),t._v(" "),s("h4",{attrs:{id:"context-object"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#context-object"}},[t._v("#")]),t._v(" Context object")]),t._v(" "),s("p",[t._v("With "),s("code",[t._v("resolveRoute")]),t._v(" function you can get context object\nwith resource "),s("code",[t._v("body")]),t._v(" or CMS collection "),s("code",[t._v("content")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-ejs extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ejs"}},[s("code",[s("span",{pre:!0,attrs:{class:"token ejs language-ejs"}},[s("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%")]),s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" context "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveRoute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// store resource")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// context = { resource, body }")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cms folder collection")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// context = { collection, slug, content }")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// context = {}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")]),s("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n")])])]),s("h3",{attrs:{id:"includes-with-absolute-path"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#includes-with-absolute-path"}},[t._v("#")]),t._v(" Includes with absolute path")]),t._v(" "),s("p",[t._v("Passing "),s("em",[t._v("absolute path")]),t._v(" (posix) you can import EJS files\ndirectly from "),s("code",[t._v("@ecomplus/storefront-template")]),t._v("\n(or other configured with "),s("code",[t._v("STOREFRONT_TEMPLATE")]),t._v(" env)\n"),s("code",[t._v("template/pages")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-ejs extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ejs"}},[s("code",[s("span",{pre:!0,attrs:{class:"token ejs language-ejs"}},[s("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("<%-")]),s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("include")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/@/views/home'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" _ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ")]),s("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("%>")])]),t._v("\n")])])]),s("h2",{attrs:{id:"project-structure"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#project-structure"}},[t._v("#")]),t._v(" Project structure")]),t._v(" "),s("p",[t._v("To work with this framework,\nyour template project "),s("strong",[t._v("must")]),t._v(" have the following file structure:")]),t._v(" "),s("h3",{attrs:{id:"basic-directory-tree"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#basic-directory-tree"}},[t._v("#")]),t._v(" Basic directory tree")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("â”œâ”€â”€ content\nâ””â”€â”€ template\n    â”œâ”€â”€ assets\n    â”œâ”€â”€ js\n    â”œâ”€â”€ pages\n    â”œâ”€â”€ public\n    â”‚   â”œâ”€â”€ admin\n    â”‚   â””â”€â”€ img\n    â”‚       â””â”€â”€ uploads\n    â””â”€â”€ scss\n")])])]),s("h4",{attrs:{id:"content"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#content"}},[t._v("#")]),t._v(" "),s("code",[t._v("/content")])]),t._v(" "),s("p",[t._v("Root directory for Netlify CMS (or any other headless CMS)\n"),s("a",{attrs:{href:"https://www.netlifycms.org/docs/add-to-your-site/#collections",target:"_blank",rel:"noopener noreferrer"}},[t._v("collections"),s("OutboundLink")],1),t._v("\nJSON content.\nYou may create and/or edit content here to preset\nsome content for examples or defaults.")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/ecomclub/storefront-framework/blob/master/content/settings.json",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("settings.json")]),s("OutboundLink")],1),t._v("\nis required and must have at least the\nproperties preseted as default.")]),t._v(" "),s("h4",{attrs:{id:"template"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#template"}},[t._v("#")]),t._v(" "),s("code",[t._v("/template")])]),t._v(" "),s("p",[t._v("Source template files.\nAll JS, SCSS, images and other assets files should be placed here.")]),t._v(" "),s("h4",{attrs:{id:"template-assets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#template-assets"}},[t._v("#")]),t._v(" "),s("code",[t._v("/template/assets")])]),t._v(" "),s("p",[t._v("Predefined template assets (such as images, videos, sounds...)\nthat should be imported inside "),s("code",[t._v("js")]),t._v(" or "),s("code",[t._v("scss")]),t._v(" files.")]),t._v(" "),s("h4",{attrs:{id:"template-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#template-js"}},[t._v("#")]),t._v(" "),s("code",[t._v("/template/js")])]),t._v(" "),s("p",[t._v("JS source files,\n"),s("a",{attrs:{href:"https://github.com/ecomclub/storefront-framework/blob/master/template/js/index.js",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("index.js")]),s("OutboundLink")],1),t._v("\nis required,\nother files and modules should be imported from index.")]),t._v(" "),s("p",[t._v("Other JS files on "),s("code",[t._v("/template/js")]),t._v(" directory\nwill also be considered additional\n"),s("a",{attrs:{href:"https://webpack.js.org/configuration/entry-context/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack entry point"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h4",{attrs:{id:"template-public"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#template-public"}},[t._v("#")]),t._v(" "),s("code",[t._v("/template/public")])]),t._v(" "),s("p",[t._v("Any static assets placed in the "),s("code",[t._v("public")]),t._v("\nfolder will simply be copied and not go through Webpack.\nYou need to reference them using absolute paths.")]),t._v(" "),s("h4",{attrs:{id:"template-public-admin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#template-public-admin"}},[t._v("#")]),t._v(" "),s("code",[t._v("/template/public/admin")])]),t._v(" "),s("p",[t._v("Setup for "),s("a",{attrs:{href:"https://www.netlifycms.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Netlify CMS"),s("OutboundLink")],1),t._v(",\nis optional if you're not planning to use the the referred CMS.")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/ecomclub/storefront-framework/blob/master/template/public/admin/config.yml",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("config.yml")]),s("OutboundLink")],1),t._v("\nshould be\n"),s("a",{attrs:{href:"https://www.netlifycms.org/docs/add-to-your-site/#configuration",target:"_blank",rel:"noopener noreferrer"}},[t._v("configured"),s("OutboundLink")],1),t._v("\nfollowing your template options and features.\nThe settings collection (file "),s("code",[t._v("content/settings.json")]),t._v(")\nmust have at least the preseted fields.")]),t._v(" "),s("h4",{attrs:{id:"template-public-img"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#template-public-img"}},[t._v("#")]),t._v(" "),s("code",[t._v("/template/public/img")])]),t._v(" "),s("p",[t._v("Place default favicon and app icons here.")]),t._v(" "),s("h4",{attrs:{id:"template-public-img-uploads"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#template-public-img-uploads"}},[t._v("#")]),t._v(" "),s("code",[t._v("/template/public/img/uploads")])]),t._v(" "),s("p",[t._v("Netlify CMS\n"),s("a",{attrs:{href:"https://www.netlifycms.org/docs/add-to-your-site/#media-and-public-folders",target:"_blank",rel:"noopener noreferrer"}},[t._v("media"),s("OutboundLink")],1),t._v("\non "),s("code",[t._v("uploads")]),t._v(" folder, where the merchant may\nupload custom logo, banners, icons and other assets from\nCMS dashboard.")]),t._v(" "),s("h4",{attrs:{id:"template-scss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#template-scss"}},[t._v("#")]),t._v(" "),s("code",[t._v("/template/scss")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://sass-lang.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("SCSS"),s("OutboundLink")],1),t._v("\nto compile CSS stylesheet,\n"),s("a",{attrs:{href:"https://github.com/ecomclub/storefront-framework/blob/master/template/scss/styles.scss",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("styles.scss")]),s("OutboundLink")],1),t._v("\nis required, other files and modules\nshould be imported inside it.")]),t._v(" "),s("h4",{attrs:{id:"template-pages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#template-pages"}},[t._v("#")]),t._v(" "),s("code",[t._v("/template/pages")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://ejs.co/",target:"_blank",rel:"noopener noreferrer"}},[t._v("EJS"),s("OutboundLink")],1),t._v(" markup to compile HTML pages.")]),t._v(" "),s("p",[t._v("Required files:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("â”œâ”€â”€ index.ejs\nâ”œâ”€â”€ #brands.ejs\nâ”œâ”€â”€ #categories.ejs\nâ”œâ”€â”€ #collections.ejs\nâ””â”€â”€ #products.ejs\n")])])]),s("p",[t._v("The above files have to be in the\nroot of "),s("code",[t._v("pages")]),t._v(" directory.")]),t._v(" "),s("p",[t._v("To complete the storefront template,\nyou should also create other EJS views.\nIt's possible to use as many pages as you want,\nand you can choose any filenames.")]),t._v(" "),s("p",[t._v("You may want to add a "),s("code",[t._v("#cms")]),t._v(" folder inside\npages directory, this folder should contain EJS views for\n"),s("a",{attrs:{href:"https://www.netlifycms.org/docs/collection-types/#folder-collections",target:"_blank",rel:"noopener noreferrer"}},[t._v("folder collections"),s("OutboundLink")],1),t._v(",\nwitch produces multiple slugs.")]),t._v(" "),s("p",[t._v("For example, for a blog folder collection on folder "),s("code",[t._v("content/blog")]),t._v(",\nyou should have a view "),s("code",[t._v("#cms/blog.ejs")]),t._v(", it will generate an HTML page for each\npost saved by CMS.")]),t._v(" "),s("h2",{attrs:{id:"output"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#output"}},[t._v("#")]),t._v(" Output")]),t._v(" "),s("p",[t._v("On production, files will be created on "),s("code",[t._v("dist")]),t._v(" folder,\n"),s("code",[t._v("template/js/index.js")]),t._v(" will be bundled to "),s("code",[t._v("dist/storefront.js")]),t._v("\nand "),s("code",[t._v("template/scss/styles.scss")]),t._v(" to "),s("code",[t._v("dist/storefront.css")]),t._v(".")]),t._v(" "),s("p",[t._v("Additional entry points on "),s("code",[t._v("template/js/")]),t._v(" or "),s("code",[t._v("template/scss/")]),t._v("\nroot will respect original filename.")]),t._v(" "),s("p",[t._v("EJS on "),s("code",[t._v("template/pages/")]),t._v(" will be parsed to "),s("code",[t._v("dist/[file].html")]),t._v("\nor "),s("code",[t._v("dist/[slug].html")]),t._v(" in case of store resources or CMS\nfolder collections.")]),t._v(" "),s("h2",{attrs:{id:"working-with-webpack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-webpack"}},[t._v("#")]),t._v(" Working with Webpack")]),t._v(" "),s("p",[t._v("The easiest way to tweak the Webpack configuration is providing an object exported by\n"),s("code",[t._v("storefront.webpack.js")]),t._v(" file on your project root.")]),t._v(" "),s("p",[t._v("The object will be merged into the final\n"),s("a",{attrs:{href:"https://github.com/ecomclub/storefront-framework/blob/master/src/webpack.config.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("config"),s("OutboundLink")],1),t._v("\nusing "),s("a",{attrs:{href:"https://github.com/survivejs/webpack-merge",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-merge"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"default-webpack-aliases"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-webpack-aliases"}},[t._v("#")]),t._v(" Default Webpack aliases")]),t._v(" "),s("p",[t._v("We've set "),s("code",[t._v("#template")]),t._v(" as Webpack resolve alias to\n"),s("code",[t._v("@ecomplus/storefront-template/template")]),t._v("\n(or other pkg if configured with "),s("code",[t._v("STOREFRONT_TEMPLATE")]),t._v(" env).")]),t._v(" "),s("p",[t._v("So you can use, for example:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#template/js/'")]),t._v("\n")])])]),s("div",{staticClass:"language-scss extra-class"},[s("pre",{pre:!0,attrs:{class:"language-scss"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("@import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#template/scss/main'")]),t._v("\n")])])]),s("h2",{attrs:{id:"deploy-with-netlify"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploy-with-netlify"}},[t._v("#")]),t._v(" Deploy with Netlify")]),t._v(" "),s("p",[t._v("As a JAMstack app, your template may be easily deployed with Netlify,\nto do that you should add a simple\n"),s("a",{attrs:{href:"https://github.com/ecomclub/storefront-framework/blob/master/netlify.toml",target:"_blank",rel:"noopener noreferrer"}},[t._v("netlify.toml"),s("OutboundLink")],1),t._v("\nfile and a\n"),s("a",{attrs:{href:"https://www.netlify.com/docs/deploy-button/",target:"_blank",rel:"noopener noreferrer"}},[t._v("deploy button"),s("OutboundLink")],1),t._v(" with "),s("strong",[t._v("link to your\ntemplate repository")]),t._v(" and\n"),s("code",[t._v("stack=cms")]),t._v(" param (considering you're using Netlify CMS).")]),t._v(" "),s("h3",{attrs:{id:"sample"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sample"}},[t._v("#")]),t._v(" Sample")]),t._v(" "),s("div",{staticClass:"language-md extra-class"},[s("pre",{pre:!0,attrs:{class:"language-md"}},[s("code",[s("span",{pre:!0,attrs:{class:"token url"}},[t._v("["),s("span",{pre:!0,attrs:{class:"token content"}},[t._v("![Deploy to Netlify")]),t._v("]("),s("span",{pre:!0,attrs:{class:"token url"}},[t._v("https://www.netlify.com/img/deploy/button.svg")]),t._v(")")]),t._v("](https://app.netlify.com/start/deploy?stack=cms&repository=https://github.com/ecomclub/storefront-framework)\n")])])]),s("p",[s("a",{attrs:{href:"https://app.netlify.com/start/deploy?stack=cms&repository=https://github.com/ecomclub/storefront-framework",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://www.netlify.com/img/deploy/button.svg",alt:"Deploy to Netlify"}}),s("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);