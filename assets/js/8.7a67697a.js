(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{358:function(t,e,s){},364:function(t,e,s){"use strict";s(343),s(341);var i={name:"ABackdrop",props:{isVisible:{type:Boolean,default:!0},zIndexOnShow:{type:Number,default:1080},transitionMs:{type:Number,default:150}},data:function(){return{opacity:0,zIndex:null,top:null}},computed:{style:function(){var t=this.top,e=this.zIndex,s=this.transitionMs,i=this.opacity;return{top:t,transition:"opacity ".concat(s,"ms linear"),opacity:i,zIndex:e}}},methods:{hide:function(){this.$emit("update:is-visible",!1),this.$emit("hide")},lockBodyScroll:function(){document.body.style.maxWidth="".concat(document.body.offsetWidth,"px"),document.body.style.overflow="hidden"}},watch:{isVisible:function(t){t?(this.opacity=null,this.lockBodyScroll()):(this.opacity=0,document.body.style.overflow=document.body.style.maxWidth=null)},opacity:function(t){var e=this;0===t?setTimeout((function(){e.top=e.zIndex=null}),this.transitionMs):(this.zIndex=this.zIndexOnShow,this.top=0)}},mounted:function(){var t=this;this.isVisible&&(setTimeout((function(){t.opacity=null}),this.transitionMs),this.lockBodyScroll())}},n=(s(368),s(55)),a=Object(n.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"backdrop",style:this.style,on:{click:this.hide}})}),[],!1,null,null,null);e.a=a.exports},368:function(t,e,s){"use strict";s(358)},406:function(t,e,s){},407:function(t,e,s){},444:function(t,e,s){var i=s(2),n=s(0),a=s(3),r=n.Date,c=a(r.prototype.getTime);i({target:"Date",stat:!0},{now:function(){return c(new r)}})},475:function(t,e,s){"use strict";s(406)},476:function(t,e,s){"use strict";s(407)},507:function(t,e,s){"use strict";s.r(e);s(343),s(84),s(7),s(56),s(35),s(186),s(341);var i=s(591),n=s(338),a=s(364),r=s(113),c=(s(342),s(444),s(391),s(369),s(111),s(110),s(195),s(82),s(187),s(30),s(83),s(356),s(357),s(352),s(348),s(115),s(353),s(370)),o=s.n(c),l=s(392),u=s.n(l),h=s(373),d=s(421),p=function(t){var e=t.ecomSearch,s=t.term,i=t.page,n=t.defaultSort;e.reset(),n&&e.setSortOrder(n),s&&e.setSearchTerm(s),i&&e.setPageNumber(i)},f={name:"SearchEngine",components:{Portal:h.a,ABackdrop:a.a,ProductCard:d.a},props:{term:String,page:{type:Number,default:1},pageSize:{type:Number,default:24},brands:Array,categories:Array,isFixedBrands:Boolean,isFixedCategories:Boolean,defaultSort:String,defaultFilters:Object,autoFixScore:{type:Number,default:.6},isFilterable:{type:Boolean,default:!0},hasPopularItems:{type:Boolean,default:!0},canLoadMore:{type:Boolean,default:!0},loadMoreSelector:String,canRetry:{type:Boolean,default:!0},canShowItems:{type:Boolean,default:!0},productCardProps:Object,gridsData:{type:Array,default:function(){if("object"===("undefined"==typeof window?"undefined":Object(r.a)(window))&&window.storefront&&window.storefront.data)return window.storefront.data.grids}}},data:function(){return{suggestedTerm:"",resultItems:[],totalSearchResults:0,hasSearched:!1,noResultsTerm:"",keepNoResultsTerm:!1,filters:[],priceRange:{},priceOptions:[],hasSetPriceRange:!1,lastSelectedFilter:null,selectedOptions:{},selectedSortOption:null,countOpenRequests:0,lastRequestId:null,isScheduled:!1,isLoadingMore:!1,hasNetworkError:!1,popularItems:[],hasSetPopularItems:!1,isAsideVisible:!1,searchFilterId:0}},computed:{i19all:function(){return Object(n.i18n)({en_us:"All",pt_br:"Todos"})},i19clearFilters:function(){return Object(n.i18n)(i.j)},i19closeFilters:function(){return Object(n.i18n)(i.l)},i19didYouMean:function(){return Object(n.i18n)(i.o)},i19filter:function(){return Object(n.i18n)(i.r)},i19filterResults:function(){return Object(n.i18n)(i.s)},i19itemsFound:function(){return Object(n.i18n)(i.B)},i19noResultsFor:function(){return Object(n.i18n)(i.I)},i19popularProducts:function(){return Object(n.i18n)(i.S)},i19price:function(){return Object(n.i18n)(i.U)},i19refineSearch:function(){return Object(n.i18n)(i.X)},i19relevance:function(){return Object(n.i18n)(i.Z)},i19results:function(){return Object(n.i18n)(i.ab)},i19searchAgain:function(){return Object(n.i18n)(i.eb)},i19searchingFor:function(){return Object(n.i18n)(i.hb)},i19searchOfflineErrorMsg:function(){return Object(n.i18n)(i.fb)},i19sort:function(){return Object(n.i18n)(i.pb)},ecomSearch:function(){return new u.a},isSearching:function(){return this.countOpenRequests>0},hasEmptyResult:function(){return this.hasSearched&&!this.resultItems.length},sortOptions:function(){return[{value:null,label:Object(n.i18n)(i.Z)},{value:"sales",label:Object(n.i18n)(i.cb)},{value:"lowest_price",label:Object(n.i18n)(i.D)},{value:"highest_price",label:Object(n.i18n)(i.y)},{value:"news",label:Object(n.i18n)(i.Y)},{value:"slug",label:Object(n.i18n)(i.G)}]},hasSelectedOptions:function(){for(var t in this.selectedOptions)if(this.selectedOptions[t]&&this.selectedOptions[t].length)return!0;return!1},isNavVisible:function(){return this.hasSearched&&this.isFilterable&&(this.isSearching||this.totalSearchResults>8||this.hasSelectedOptions||this.hasSetPriceRange)},isResultsVisible:function(){return this.hasSearched&&!this.isSearching||this.suggestedItems.length},hasFilters:function(){return this.hasSelectedOptions||this.filters.find((function(t){return t.options.length}))||this.hasSetPriceRange},suggestedItems:function(){return this.resultItems.length?this.resultItems:this.popularItems},loadObserver:function(){var t=this;return this.canLoadMore&&o()("#search-engine-load-more",{load:function(){t.isLoadingMore=!0,t.fetchItems()}})}},methods:{fetchItems:function(t,e){var s=this,i=e?new u.a:this.ecomSearch,n=Date.now();this.countOpenRequests++,this.lastRequestId=n,this.isLoadingMore&&i.setPageNumber(this.page+Math.ceil(this.resultItems.length/this.pageSize));var a=i.setPageSize(this.pageSize).fetch().then((function(t){return s.lastRequestId===n&&(s.hasNetworkError=!1,e||s.handleSearchResult()),!e&&(s.term||s.brands||s.categories)||(s.hasSetPopularItems=!0,s.popularItems=i.getItems()),t})).catch((function(i){console.error(i),(s.lastRequestId===n||e)&&(!s.canRetry||t||i.response&&400===i.response.status?s.hasNetworkError=!0:s.fetchItems(!0,e))})).finally((function(){s.countOpenRequests--,s.isLoadingMore=!1}));this.$emit("fetch",{ecomSearch:i,fetching:a,isPopularItems:e})},updateFilters:function(){var t=this,e=[],s=function(s,i,n){var a=t.filters.findIndex((function(t){return t.filter===s}));if(s!==t.lastSelectedFilter){if(-1===a&&(a=t.filters.length),t["isFixed".concat(s)]){var r=t[s.toLowerCase()];r&&(i=i.filter((function(t){var e=t.key;return-1===r.indexOf(e)})))}t.filters[a]={filter:s,options:i,isSpec:n};var c=t.selectedOptions[s]?t.selectedOptions[s].filter((function(t){return i.find((function(e){return e.key===t}))})):[];t.$set(t.selectedOptions,s,c)}e.push(a)};s("Brands",this.ecomSearch.getBrands()),s("Categories",this.ecomSearch.getCategories()),this.ecomSearch.getSpecs().forEach((function(t){var e=t.key,i=t.options;s(e,i,!0)})),this.filters=this.filters.filter((function(t,s){return e.includes(s)})),this.searchFilterId=Date.now()},updatePriceOptions:function(){if(this.priceRange=this.ecomSearch.getPriceRange(),Math.round(this.priceRange.min)<Math.round(this.priceRange.avg)){var t=Math.ceil(Math.max(1.5*this.priceRange.min,this.priceRange.avg/2)),e=Math.ceil(Math.min(this.priceRange.max/1.5,2*this.priceRange.avg));if(t!==e)return void(this.priceOptions=[Math.min(t,e),Math.max(t,e),null].map((function(t,e,s){var a=s[e-1];return{min:a,max:t,label:a?e<2?"".concat(Object(n.formatMoney)(a)," - ").concat(Object(n.formatMoney)(t)):"".concat(Object(n.i18n)(i.c)," ").concat(Object(n.formatMoney)(a)):"".concat(Object(n.i18n)(i.vb)," ").concat(Object(n.formatMoney)(t))}})))}this.priceOptions=[]},handleSuggestions:function(){var t=this;if(this.term){var e=this.ecomSearch,s=this.term.toLowerCase(),i=s,n=!1;this.suggestedTerm="",e.getTermSuggestions().forEach((function(e){var a=e.options,r=e.text;if(a.length){var c=a[0],o=c.text.toLowerCase();!t.totalSearchResults&&t.autoFixScore>0&&c.score>=t.autoFixScore&&-1===o.indexOf(s)&&(n=!0),i=i.replace(new RegExp(r,"i"),o)}})),this.keepNoResultsTerm?this.keepNoResultsTerm=!1:this.noResultsTerm="",i!==s&&(n?(this.noResultsTerm=s,this.keepNoResultsTerm=!0,this.$emit("update:term",i)):this.suggestedTerm=i,e.history.shift())}},handleSearchResult:function(){var t=this,e=this.ecomSearch;if(this.totalSearchResults=e.getTotalCount(),this.resultItems=this.isLoadingMore?this.resultItems.concat(e.getItems()):e.getItems(),this.updateFilters(),!this.hasSearched&&this.defaultFilters){var s=function(e){var s=t.defaultFilters[e];Array.isArray(s)?s.forEach((function(s){return t.setFilterOption(e,s,!0)})):"string"==typeof s&&t.setFilterOption(e,s,!0)};for(var i in this.defaultFilters)s(i)}this.updatePriceOptions(),this.handleSuggestions(),this.totalSearchResults||!this.hasPopularItems||this.hasSetPopularItems||this.fetchItems(!1,!0),this.$emit(this.isLoadingMore?"load-more":"search",{ecomSearch:e}),this.hasSearched||this.$nextTick((function(){setTimeout((function(){t.hasSearched=!0}),100)}))},scheduleFetch:function(){var t=this;this.isScheduled||(this.isScheduled=!0,this.$nextTick((function(){setTimeout((function(){t.fetchItems(),t.isScheduled=!1}),30)})))},resetAndFetch:function(){p(this),this.handlePresetedOptions(),this.scheduleFetch()},toggleFilters:function(t){this.isAsideVisible="boolean"==typeof t?t:!this.isAsideVisible},getFilterLabel:function(t){switch(t){case"Brands":return Object(n.i18n)(i.e);case"Categories":return Object(n.i18n)(i.i);default:if(this.gridsData){var e=this.gridsData.find((function(e){return e.grid_id===t}));if(e)return e.title||e.grid_id}}return t},handlePresetedOptions:function(){var t=this;["brands","categories"].forEach((function(e){if(t[e]&&t[e].length){var s=e.charAt(0).toUpperCase()+e.slice(1);t["isFixed".concat(s)]||(t.selectedOptions[s]=t[e]),t.updateSearchFilter(s)}}))},updateSearchFilter:function(t){var e=this.ecomSearch,s=this.selectedOptions[t];switch(void 0!==s&&s.length||(s=null),t){case"Brands":this.isFixedBrands&&this.brands&&(s=s?s.concat(this.brands):this.brands),e.setBrandNames(s);break;case"Categories":e.setCategoryNames(s),this.isFixedCategories&&this.categories&&e.mergeFilter({terms:{"categories.name":this.categories}});break;default:e.setSpec(t,s)}},handlePriceInputs:function(){var t=this.$refs,e=t.inputMinPrice,s=t.inputMaxPrice,i=Number(e.value)||null,n=Number(s.value)||null;(i&&!n||i<=n)&&this.setPriceRange(i,n),e.value=i||"",s.value=n||""},setPriceRange:function(t,e){if(t&&t!==this.priceRange.min||e&&e!==this.priceRange.max)this.hasSetPriceRange=!0;else{if(!this.hasSetPriceRange)return;this.hasSetPriceRange=!1}this.ecomSearch.setPriceRange(t,e),this.scheduleFetch()},setFilterOption:function(t,e,s){var i=this.selectedOptions[t];if(i){var n=i.indexOf(e);s?-1===n&&(this.lastSelectedFilter=t,i.push(e)):(n>-1&&i.splice(n,1),i.length||this.lastSelectedFilter!==t||(this.lastSelectedFilter=null)),this.updateSearchFilter(t),this.scheduleFetch()}},clearFilters:function(){var t=this.selectedOptions;for(var e in t)t[e]&&(t[e]=[],this.updateSearchFilter(e));this.fetchItems()},setSortOrder:function(t){this.selectedSortOption=t,this.ecomSearch.setSortOrder(t),this.page>1?this.page=1:this.scheduleFetch()}},watch:{term:function(){this.resetAndFetch()},brands:function(){this.resetAndFetch()},categories:function(){this.resetAndFetch()},page:function(t){this.ecomSearch.setPageNumber(t),this.scheduleFetch()},isSearching:function(t){var e=this;!t&&this.loadObserver&&this.$nextTick((function(){e.loadObserver.observe()}))}},created:function(){p(this),this.handlePresetedOptions(),this.fetchItems()}},m=(s(475),s(55)),g=Object(m.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"search-engine"},[s("a-backdrop",{attrs:{"is-visible":t.isAsideVisible},on:{"update:isVisible":function(e){t.isAsideVisible=e},"update:is-visible":function(e){t.isAsideVisible=e}}}),t._v(" "),s("transition",{attrs:{"enter-active-class":"animated slideInRight","leave-active-class":"animated slideOutRight"}},[s("aside",{directives:[{name:"show",rawName:"v-show",value:t.isAsideVisible,expression:"isAsideVisible"}],staticClass:"search-engine__aside card shadow"},[t._t("filters",(function(){return[s("header",{staticClass:"card-header"},[t._v("\n          "+t._s(t.i19refineSearch)+"\n          "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":t.i19closeFilters},on:{click:t.toggleFilters}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),s("div",{key:t.searchFilterId,staticClass:"card-body"},[t.hasSetPriceRange||t.priceOptions.length?s("div",{staticClass:"search-engine__filter search-engine__filter--price"},[s("h5",[t._v(t._s(t.i19price))]),t._v(" "),t.hasSetPriceRange?s("a",{staticClass:"btn btn-link btn-sm mb-2",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.setPriceRange()}}},[s("i",{staticClass:"i-arrow-left mr-1"}),t._v("\n              "+t._s(t.i19all)+"\n            ")]):t._e(),t._v(" "),t._l(t.priceOptions,(function(e,i){var n=e.label,a=e.min,r=e.max;return s("div",{key:"Price-"+i,staticClass:"search-engine__option custom-control custom-radio"},[s("input",{staticClass:"custom-control-input",attrs:{type:"radio",name:"price-option",id:"Price-"+i},on:{click:function(e){return t.setPriceRange(a,r)}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"Price-"+i}},[t._v("\n                "+t._s(n)+"\n              ")])])})),t._v(" "),t.priceRange.max-t.priceRange.min>2?s("div",{staticClass:"search-engine__option-range input-group input-group-sm mt-2"},[s("input",{ref:"inputMinPrice",staticClass:"form-control",attrs:{type:"text","aria-describedby":"search-engine-price-range","aria-label":"Min "+t.i19price,placeholder:"Min: "+Math.floor(t.priceRange.min)}}),t._v(" "),s("input",{ref:"inputMaxPrice",staticClass:"form-control",attrs:{type:"text","aria-label":"Max","aria-describedby":"search-engine-price-range","aria-label":"Max "+t.i19price,placeholder:"Max: "+Math.ceil(t.priceRange.max)}}),t._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",id:"search-engine-price-range"},on:{click:function(e){return t.handlePriceInputs()}}},[s("i",{staticClass:"i-chevron-right"})])])]):t._e()],2):t._e(),t._v(" "),t._l(t.filters,(function(e,i){var n=e.filter,a=e.options,r=e.isSpec;return a.length?s("div",{key:"filters-"+n,staticClass:"search-engine__filter",class:"search-engine__filter--"+n},[t._o([s("button",{staticClass:"btn text-truncate",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapse-"+n,"aria-expanded":i<5?"true":"false","aria-controls":"collapse-"+n}},[s("i",{staticClass:"i-chevron-down"}),s("i",{staticClass:"i-chevron-up"}),t._v("\n                "+t._s(t.getFilterLabel(n))+"\n              ")]),t._v(" "),s("div",{staticClass:"collapse",class:i<5?"show":null,attrs:{id:"collapse-"+n}},t._l(a,(function(e,i){return s("div",{key:n+"-"+i,staticClass:"search-engine__option custom-control custom-checkbox"},[s("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:n+"-"+i},domProps:{checked:t.selectedOptions[n].indexOf(e.key)>-1},on:{change:function(s){return t.setFilterOption(n,e.key,s.target.checked)}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:n+"-"+i}},[t._v("\n                    "+t._s(e.key)+"\n                    "),r?t._e():s("small",[t._v("("+t._s(e.doc_count)+")")])])])})),0)],0,"filters-"+n)],2):t._e()}))],2),t._v(" "),s("footer",{staticClass:"card-footer"},[s("button",{staticClass:"btn btn-sm btn-block btn-outline-secondary",attrs:{type:"button"},on:{click:t.clearFilters}},[s("span",{staticClass:"mr-1"},[s("i",{staticClass:"i-trash"})]),t._v("\n            "+t._s(t.i19clearFilters)+"\n          ")])])]}))],2)]),t._v(" "),s("transition",{attrs:{"enter-active-class":"animated fadeInRight slower","leave-active-class":"animated fadeOutRight"}},[t.isNavVisible&&t.hasFilters?s("button",{staticClass:"search-engine__aside-open btn btn-secondary",attrs:{type:"button","aria-label":t.i19filterResults,disabled:t.isSearching},on:{click:function(e){return t.toggleFilters(!0)}}},[t.isSearching?s("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[s("span",{staticClass:"sr-only"},[t._v("Loading...")])]):s("span",[s("span",{staticClass:"d-none d-md-inline"},[s("i",{staticClass:"i-search"})]),t._v(" "),s("i",{staticClass:"i-filter"})])]):t._e()]),t._v(" "),s("transition",{attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeOutUp fast position-absolute"}},[t.isNavVisible?s("div",{staticClass:"search-engine__nav"},[s("div",{staticClass:"container"},[t._t("nav",(function(){return[s("div",{staticClass:"search-engine__count"},[s("strong",[t._v(t._s(t.totalSearchResults))]),t._v("\n            "+t._s(t.i19itemsFound)+"\n            "),t.isSearching?s("div",{staticClass:"search-engine__spinner spinner-grow",attrs:{role:"status"}},[s("span",{staticClass:"sr-only"},[t._v("Loading...")])]):t._e()]),t._v(" "),t.isFilterable?s("div",{staticClass:"search-engine__toggles"},[t.hasFilters?s("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(e){return t.toggleFilters(!0)}}},[s("i",{staticClass:"i-filter mr-1"}),t._v(" "),s("span",{staticClass:"d-none d-md-inline-block"},[t._v("\n                "+t._s(t.i19filterResults)+"\n              ")]),t._v(" "),s("span",{staticClass:"d-md-none"},[t._v("\n                "+t._s(t.i19filter)+"\n              ")])]):t._e(),t._v(" "),s("div",{staticClass:"dropdown"},[s("button",{staticClass:"btn btn-light",attrs:{type:"button",id:"search-engine-sort","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("i",{staticClass:"i-sort mr-1"}),t._v("\n                "+t._s(t.i19sort)+"\n              ")]),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"search-engine-sort"}},t._l(t.sortOptions,(function(e,i){var n=e.value,a=e.label;return s("a",{key:"sort-"+i,staticClass:"dropdown-item",class:"search-engine__sort--"+n,attrs:{href:"#",active:t.selectedSortOption===n},on:{click:function(e){return e.preventDefault(),t.setSortOrder(n)}}},[t._v("\n                  "+t._s(a)+"\n                ")])})),0)])]):t._e()]}),null,{totalSearchResults:t.totalSearchResults,toggleFilters:t.toggleFilters})],2)]):t._e()]),t._v(" "),s("transition",{attrs:{"enter-active-class":"animated fadeIn slower"}},[t.isResultsVisible?s("div",{staticClass:"search-engine__results fade",style:{opacity:t.isSearching&&!t.isLoadingMore?.4:1}},[s("div",{staticClass:"container"},[s("div",{staticClass:"search-engine__info px-lg-4"},[t.term?[t.hasEmptyResult?s("div",{staticClass:"search-engine__no-results"},[s("div",{staticClass:"lead mb-2"},[t.suggestedTerm?s("span",[t._v("\n                  "+t._s(t.i19didYouMean)+"\n                  "),s("a",{attrs:{href:"#"},domProps:{textContent:t._s(t.suggestedTerm)},on:{click:function(e){return e.preventDefault(),t.$emit("update:term",t.suggestedTerm)}}}),t._v("\n                  ?\n                ")]):t._e(),t._v("\n                "+t._s(t.i19noResultsFor)+"\n                "),s("em",[t._v(t._s(t.term))])]),t._v(" "),t.popularItems.length?s("h4",[t._v("\n                "+t._s(t.i19popularProducts)+"\n              ")]):t._e()]):s("div",{staticClass:"search-engine__terms"},[t.noResultsTerm?s("span",{staticClass:"d-none d-lg-inline"},[t._v("\n                "+t._s(t.i19noResultsFor)+"\n                "),s("s",[t._v(t._s(t.noResultsTerm))]),t._v(".\n              ")]):t._e(),t._v(" "),s("span",{staticClass:"d-none d-md-inline"},[t._v("\n                "+t._s(t.i19searchingFor)+":\n              ")]),t._v(" "),s("h1",[t._v(t._s(t.term))])])]:t.hasEmptyResult&&t.popularItems.length?s("h3",[t._v("\n            "+t._s(t.i19popularProducts)+"\n          ")]):t._e(),t._v(" "),s("transition",{attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeOutUp"}},[t.hasSelectedOptions&&t.isFilterable?s("div",[s("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:t.clearFilters}},[s("i",{staticClass:"i-trash mr-1"}),t._v("\n                "+t._s(t.i19clearFilters)+"\n              ")]),t._v(" "),t._l(t.selectedOptions,(function(e,i){return t._l(e,(function(e){return s("button",{staticClass:"search-engine__selected btn btn-sm btn-light",attrs:{type:"button"},on:{click:function(s){return t.setFilterOption(i,e,!1)}}},[s("i",{staticClass:"i-times mr-1"}),t._v("\n                  "+t._s(e)+"\n                  "),s("small",[t._v(t._s(t.getFilterLabel(i)))])])}))}))],2):t._e()])],2),t._v(" "),t.canShowItems?s("article",{staticClass:"search-engine__retail"},[s("div",{staticClass:"row"},t._l(t.suggestedItems,(function(e){return s("div",{key:e._id,staticClass:"col-6 col-md-4 col-lg-3"},[t._t("product-card",(function(){return[s("product-card",t._b({staticClass:"search-engine__item",attrs:{product:e}},"product-card",t.productCardProps,!1))]}),null,{product:e})],2)})),0)]):t._e(),t._v(" "),s("transition",{attrs:{"enter-active-class":"animated fadeInDown"}},[t.hasNetworkError?s("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[s("i",{staticClass:"i-wifi mr-2"}),t._v("\n            "+t._s(t.i19searchOfflineErrorMsg)+"\n            "),s("a",{staticClass:"alert-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.fetchItems.apply(null,arguments)}}},[t._v("\n              "+t._s(t.i19searchAgain)+"\n            ")])]):t._e()])],1)]):t._e()]),t._v(" "),s("transition",{attrs:{"leave-active-class":"animated fadeOut"}},[!t.hasSearched||t.isLoadingMore?t._t("default"):t._e()],2),t._v(" "),s(t.loadMoreSelector?"portal":"div",{tag:"component",attrs:{selector:t.loadMoreSelector}},[t.resultItems.length<t.totalSearchResults?s("div",{key:t.lastRequestId,staticStyle:{width:"100%","margin-top":"20px",height:"5px"},attrs:{id:"search-engine-load-more"}}):t._e()])],1)}),[],!1,null,null,null).exports,v={name:"InstantSearch",components:{ABackdrop:a.a,SearchEngine:g},props:{term:{type:String,default:""},isVisible:{type:Boolean,default:!0},pageSize:{type:Number,default:8},autoFixScore:{type:Number,default:.83},searchEngineProps:Object,productCardProps:{type:Object,default:function(){return{isSmall:!0}}}},data:function(){return{localTerm:this.term,searchTriggerTimer:null,searchTerm:"",history:[],totalSearchResults:0,isSearching:!1,hasSearched:!1}},computed:{i19close:function(){return Object(n.i18n)(i.k)},i19items:function(){return Object(n.i18n)(i.A)},i19search:function(){return Object(n.i18n)(i.db)},i19searchProducts:function(){return Object(n.i18n)(i.gb)},i19seeAll:function(){return Object(n.i18n)(i.ib)}},methods:{hide:function(){this.$emit("update:is-visible",!1)},setSearchTerm:function(t){var e=this.$el.parentElement;if(e&&"FORM"===e.tagName){for(var s=e.elements,i=0;i<s.length;i++)if("term"===s[i].name){s[i].value=t;break}e.submit()}else this.localTerm=t},handleFetching:function(t){var e=this,s=t.fetching;this.isSearching=!0,s.finally((function(){e.isSearching=!1}))},handleSearch:function(t){var e=this,s=t.ecomSearch;this.totalSearchResults=s.getTotalCount(),this.history=s.history.filter((function(t){return t.length>2&&-1===e.localTerm.indexOf(t)})).slice(0,6),this.hasSearched||(this.hasSearched=!0)}},watch:{isVisible:{handler:function(t){var e=this;t&&this.$nextTick((function(){e.$refs.input&&e.$refs.input.focus()}))},immediate:!0},localTerm:{handler:function(t){var e=this,s=t.length>2?t:"";s!==this.searchTerm&&(clearTimeout(this.searchTriggerTimer),this.searchTriggerTimer=setTimeout((function(){e.searchTerm=s}),400)),this.$emit("update:term",t)},immediate:!0}}},_=(s(476),{name:"DemoInstantSearch",components:{InstantSearch:Object(m.a)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("a-backdrop",{attrs:{"is-visible":t.isVisible},on:{hide:t.hide}}),t._v(" "),s("transition",{attrs:{"enter-active-class":"animated zoomIn","leave-active-class":"animated fadeOutUp slow"}},[t.isVisible||t.hasSearched?s("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"search__box card"},[t._t("header",(function(){return[s("header",{staticClass:"search__header card-header"},[s("div",{staticClass:"search__input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localTerm,expression:"localTerm"}],ref:"input",staticClass:"search__input form-control form-control-lg",attrs:{type:"search",autocomplete:"off",placeholder:t.i19searchProducts},domProps:{value:t.localTerm},on:{input:function(e){e.target.composing||(t.localTerm=e.target.value)}}}),t._v(" "),s("button",{staticClass:"search__submit",attrs:{type:"submit","aria-label":t.i19search}},[s("i",{staticClass:"i-search"})])]),t._v(" "),s("div",{staticClass:"search__status"},[t.isSearching?s("div",{staticClass:"search__spinner spinner-grow",attrs:{role:"status"}},[s("span",{staticClass:"sr-only"},[t._v("Loading...")])]):t._e(),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":t.i19close},on:{click:t.hide}},[s("i",{staticClass:"i-times-circle"})])])])]}),null,{isSearching:t.isSearching}),t._v(" "),s("article",{staticClass:"search__body card-body"},[t._t("search-engine",(function(){return[s("SearchEngine",t._b({attrs:{term:t.searchTerm,"is-filterable":!1,"product-card-props":t.productCardProps},on:{"update:term":function(e){t.searchTerm=e},fetch:t.handleFetching,search:t.handleSearch}},"SearchEngine",Object.assign({},t.searchEngineProps,{pageSize:t.pageSize,autoFixScore:t.autoFixScore}),!1),[s("div",{staticClass:"search__loading spinner-border",attrs:{role:"status"}},[s("span",{staticClass:"sr-only"},[t._v("Loading...")])])])]}),null,{term:t.searchTerm})],2),t._v(" "),s("footer",{staticClass:"search__footer card-footer"},[t._t("count-results",(function(){return[s("transition",{attrs:{"enter-active-class":"animated fadeInDown"}},[t.hasSearched?s("div",{staticClass:"search__count"},[s("strong",[t._v(t._s(t.totalSearchResults))]),t._v("\n              "+t._s(t.i19items.toLowerCase())+"\n              "),t.totalSearchResults>t.pageSize?s("button",{staticClass:"ml-2 btn btn-primary",attrs:{type:"submit"}},[t._v("\n                "+t._s(t.i19seeAll)+"\n              ")]):t._e()]):t._e()])]}),null,{hasSearched:t.hasSearched,totalSearchResults:t.totalSearchResults}),t._v(" "),t._t("history",(function(){return[s("transition",{attrs:{"enter-active-class":"animated fadeInDown"}},[t.history.length?s("div",{staticClass:"search__history d-none d-lg-block"},[s("i",{staticClass:"i-history"}),t._v(" "),t._l(t.history,(function(e){return s("a",{staticClass:"search__history-link",attrs:{href:"#"},domProps:{textContent:t._s(e)},on:{click:function(s){return s.preventDefault(),t.setSearchTerm(e)}}})}))],2):t._e()])]}),null,{history:t.history})],2)],2):t._e()])],1)}),[],!1,null,null,null).exports},data:function(){return{isVisible:!1}}}),b=Object(m.a)(_,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"demo"},[s("button",{staticClass:"btn btn-primary my-4",attrs:{type:"button"},on:{click:function(e){t.isVisible=!0}}},[t._v("\n    Click here to search products\n  ")]),t._v(" "),s("InstantSearch",{attrs:{"is-visible":t.isVisible},on:{"update:isVisible":function(e){t.isVisible=e},"update:is-visible":function(e){t.isVisible=e}}})],1)}),[],!1,null,null,null);e.default=b.exports}}]);